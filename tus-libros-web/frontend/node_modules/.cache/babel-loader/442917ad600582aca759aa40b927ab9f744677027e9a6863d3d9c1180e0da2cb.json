{"ast":null,"code":"import ApiResponseHandler from \"./errors/ApiResponseHandler.js\";\nexport default class ApiClient {\n  constructor(requester, apiResponseHandler = undefined, onExceptionDo = exception => {\n    throw exception;\n  }) {\n    this._requester = requester;\n    this._onExceptionDo = onExceptionDo;\n    this._defaultHandleError = () => {};\n    this._apiResponseHandler = apiResponseHandler || new ApiResponseHandler({});\n    this._handleResponse = this._handleResponse.bind(this);\n    this._handleException = this._handleException.bind(this);\n  }\n  _handleException(exception) {\n    return this._onExceptionDo(exception);\n  }\n  _handleResponse(response, handleError) {\n    if (response.hasError()) {\n      if (handleError === undefined) {\n        this._defaultHandleError(response);\n      } else {\n        handleError(response);\n      }\n    }\n  }\n  _handleResponseForRequest(response, endpoint, values, responseHandler = undefined) {\n    const retry = async () => {\n      return this.callEndpoint(endpoint, values);\n    };\n    const request = {\n      endpoint,\n      values,\n      retry\n    };\n    const apiResponseHandler = this._apiResponseHandler.mergeWith(responseHandler);\n    return apiResponseHandler.handleResponseForRequest(response, request);\n  }\n  async callEndpoint(endpoint, values, customResponseHandler) {\n    try {\n      const response = await this._call(endpoint, values);\n      return this._handleResponseForRequest(response, endpoint, values, customResponseHandler);\n    } catch (exception) {\n      return this._handleException(exception);\n    }\n  }\n  _call(endpoint, values) {\n    return this._requester.call({\n      endpoint: endpoint,\n      data: endpoint.adaptValues(values)\n    });\n  }\n}","map":{"version":3,"names":["ApiResponseHandler","ApiClient","constructor","requester","apiResponseHandler","undefined","onExceptionDo","exception","_requester","_onExceptionDo","_defaultHandleError","_apiResponseHandler","_handleResponse","bind","_handleException","response","handleError","hasError","_handleResponseForRequest","endpoint","values","responseHandler","retry","callEndpoint","request","mergeWith","handleResponseForRequest","customResponseHandler","_call","call","data","adaptValues"],"sources":["/Users/marianoezequielgomez/Desktop/Ing-Software1-Leveroni/1c2024-tuslibrosweb-grupo-14/frontend/node_modules/@eryxcoop/appyx-comm/src/ApiClient.js"],"sourcesContent":["import ApiResponseHandler from \"./errors/ApiResponseHandler.js\";\n\nexport default class ApiClient {\n  constructor(\n    requester,\n    apiResponseHandler = undefined,\n    onExceptionDo = (exception) => {\n      throw exception;\n    },\n  ) {\n    this._requester = requester;\n    this._onExceptionDo = onExceptionDo;\n    this._defaultHandleError = () => {\n    };\n    this._apiResponseHandler = apiResponseHandler || new ApiResponseHandler({});\n    this._handleResponse = this._handleResponse.bind(this);\n    this._handleException = this._handleException.bind(this);\n  }\n\n  _handleException(exception) {\n    return this._onExceptionDo(exception);\n  }\n\n  _handleResponse(response, handleError) {\n    if (response.hasError()) {\n      if (handleError === undefined) {\n        this._defaultHandleError(response);\n      } else {\n        handleError(response)\n      }\n    }\n  }\n\n  _handleResponseForRequest(response, endpoint, values, responseHandler = undefined) {\n    const retry = async () => {\n      return this.callEndpoint(endpoint, values);\n    };\n    const request = {endpoint, values, retry};\n\n    const apiResponseHandler = this._apiResponseHandler.mergeWith(responseHandler);\n    return apiResponseHandler.handleResponseForRequest(response, request);\n  }\n\n  async callEndpoint(endpoint, values, customResponseHandler) {\n    try {\n      const response = await this._call(endpoint, values);\n      return this._handleResponseForRequest(response, endpoint, values, customResponseHandler);\n    } catch (exception) {\n      return this._handleException(exception);\n    }\n  }\n\n  _call(endpoint, values) {\n    return this._requester.call({\n      endpoint: endpoint,\n      data: endpoint.adaptValues(values)\n    });\n  }\n\n}\n"],"mappings":"AAAA,OAAOA,kBAAkB,MAAM,gCAAgC;AAE/D,eAAe,MAAMC,SAAS,CAAC;EAC7BC,WAAWA,CACTC,SAAS,EACTC,kBAAkB,GAAGC,SAAS,EAC9BC,aAAa,GAAIC,SAAS,IAAK;IAC7B,MAAMA,SAAS;EACjB,CAAC,EACD;IACA,IAAI,CAACC,UAAU,GAAGL,SAAS;IAC3B,IAAI,CAACM,cAAc,GAAGH,aAAa;IACnC,IAAI,CAACI,mBAAmB,GAAG,MAAM,CACjC,CAAC;IACD,IAAI,CAACC,mBAAmB,GAAGP,kBAAkB,IAAI,IAAIJ,kBAAkB,CAAC,CAAC,CAAC,CAAC;IAC3E,IAAI,CAACY,eAAe,GAAG,IAAI,CAACA,eAAe,CAACC,IAAI,CAAC,IAAI,CAAC;IACtD,IAAI,CAACC,gBAAgB,GAAG,IAAI,CAACA,gBAAgB,CAACD,IAAI,CAAC,IAAI,CAAC;EAC1D;EAEAC,gBAAgBA,CAACP,SAAS,EAAE;IAC1B,OAAO,IAAI,CAACE,cAAc,CAACF,SAAS,CAAC;EACvC;EAEAK,eAAeA,CAACG,QAAQ,EAAEC,WAAW,EAAE;IACrC,IAAID,QAAQ,CAACE,QAAQ,CAAC,CAAC,EAAE;MACvB,IAAID,WAAW,KAAKX,SAAS,EAAE;QAC7B,IAAI,CAACK,mBAAmB,CAACK,QAAQ,CAAC;MACpC,CAAC,MAAM;QACLC,WAAW,CAACD,QAAQ,CAAC;MACvB;IACF;EACF;EAEAG,yBAAyBA,CAACH,QAAQ,EAAEI,QAAQ,EAAEC,MAAM,EAAEC,eAAe,GAAGhB,SAAS,EAAE;IACjF,MAAMiB,KAAK,GAAG,MAAAA,CAAA,KAAY;MACxB,OAAO,IAAI,CAACC,YAAY,CAACJ,QAAQ,EAAEC,MAAM,CAAC;IAC5C,CAAC;IACD,MAAMI,OAAO,GAAG;MAACL,QAAQ;MAAEC,MAAM;MAAEE;IAAK,CAAC;IAEzC,MAAMlB,kBAAkB,GAAG,IAAI,CAACO,mBAAmB,CAACc,SAAS,CAACJ,eAAe,CAAC;IAC9E,OAAOjB,kBAAkB,CAACsB,wBAAwB,CAACX,QAAQ,EAAES,OAAO,CAAC;EACvE;EAEA,MAAMD,YAAYA,CAACJ,QAAQ,EAAEC,MAAM,EAAEO,qBAAqB,EAAE;IAC1D,IAAI;MACF,MAAMZ,QAAQ,GAAG,MAAM,IAAI,CAACa,KAAK,CAACT,QAAQ,EAAEC,MAAM,CAAC;MACnD,OAAO,IAAI,CAACF,yBAAyB,CAACH,QAAQ,EAAEI,QAAQ,EAAEC,MAAM,EAAEO,qBAAqB,CAAC;IAC1F,CAAC,CAAC,OAAOpB,SAAS,EAAE;MAClB,OAAO,IAAI,CAACO,gBAAgB,CAACP,SAAS,CAAC;IACzC;EACF;EAEAqB,KAAKA,CAACT,QAAQ,EAAEC,MAAM,EAAE;IACtB,OAAO,IAAI,CAACZ,UAAU,CAACqB,IAAI,CAAC;MAC1BV,QAAQ,EAAEA,QAAQ;MAClBW,IAAI,EAAEX,QAAQ,CAACY,WAAW,CAACX,MAAM;IACnC,CAAC,CAAC;EACJ;AAEF","ignoreList":[]},"metadata":{},"sourceType":"module","externalDependencies":[]}